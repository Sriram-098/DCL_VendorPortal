{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DCIL Vendor Registration</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #e6f2ff, #f7faff);
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
   
    @keyframes fade {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h2 {
      color: #005b9f;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .btn {
      background-color: #005b9f;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    .btn:hover {
      background-color: #0083b0;
    }
    .form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.2rem;
  margin-bottom: 20px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

input, select {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.btn {
  padding: 10px 20px;
  background-color: #0077cc;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.btn:hover {
  background-color: #005fa3;
}

.vendor-header {
  background-color: #004b8d;
  color: white;
  width: 100%;
  padding: 20px 0;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: center;
  max-width: 1200px;
  margin: auto;
  padding: 0 20px;
  flex-wrap: wrap;
}

.logo {
  width: 250px;
  height: auto;
  margin-right: 20px;
}

.title-block {
  text-align: center;
  flex-grow: 1;
}

.title-block h1 {
  margin: 0;
  font-size: 24px;
  font-weight: bold;
}

.title-block h2,
.title-block h3,
.title-block h4 {
  margin: 4px 0;
  font-size: 16px;
  font-weight: normal;
}
body {
  margin: 0;
  padding: 0;
  background-image: url("{% static 'pexels-efeyagizs-16520012.jpg' %}"); /* üîÅ Replace with your image path */
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Overlay for darkening/lightening the background for readability */
.form-overlay {
  background-color: rgba(255, 255, 255, 0.9); /* White with 90% opacity */
  min-height: 100vh;
  padding: 40px 20px;
}

/* Optional: Style to contain your form in a central box */
.form-container {
  max-width: 1000px;
  margin: auto;
  background-color: white;
  padding: 30px 40px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}
.form-group {
  display: flex;
  flex-direction: column;
  width: 100%;
  margin-bottom: 15px;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 8px 12px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}
.form-step {
  position: absolute;
  visibility: hidden;
  height: 0;
  overflow: hidden;
}

.form-step.active {
  position: static;
  visibility: visible;
  height: auto;
}

</style>


 
</head>
<body>
    
  <div class="container">
    <div class="vendor-header">
  <div class="header-content">
    <img src="https://orissadiary.com/wp-content/uploads/2017/07/Dredging-Corporation-of-India-Limited-vacancy.jpg" alt="DCL Logo" class="logo">
    <div class="title-block">
      <h1>Dredging Corporation Limited</h1>
      <h2 style="color: white;">Visakhapatnam</h2>

      <h3>Materials Management Department</h3>
      <h4>Vendor Registration System</h4>
    </div>
  </div>
</div>
<br>
  {% if messages %}
    <ul>
      {% for message in messages %}
        <li style="color: red;">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}


   <form id="vendorForm" method="POST" enctype="multipart/form-data" action="{% url 'register' %}">
  {% csrf_token %}

  <!-- Step 1: General Information -->
  <div class="form-step active" id="step1">
  <h2>1. General Information</h2>

  <div class="form-grid">
    <div class="form-group">
      <label for="supplierName">Supplier Name <span style="color:red">*</span></label>
      <input type="text" id="supplierName" name="supplier_name" required>
      
    </div>
    {% if messages %}{% for message in messages %}{% if "Username already exists" in message.message|lower %}<span class="error" style="color:red ;display:block;">{{ message }}</span>{% endif %}{% endfor %}{% endif %}

    <div class="form-group">
      <label for="supplierAlias">Supplier Alias</label>
      <input type="text" id="supplierAlias" name="supplier_alias">
      {% if messages %}{% for message in messages %}{% if 'supplier alias' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="address1">Address Line 1 <span style="color:red">*</span></label>
      <input type="text" id="address1" name="address1" required>
      {% if messages %}{% for message in messages %}{% if 'address line 1' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="address2">Address Line 2</label>
      <input type="text" id="address2" name="address2">
      {% if messages %}{% for message in messages %}{% if 'address line 2' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="address3">Address Line 3</label>
      <input type="text" id="address3" name="address3">
      {% if messages %}{% for message in messages %}{% if 'address line 3' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="city">City <span style="color:red">*</span></label>
      <input type="text" id="city" name="city" required>
      {% if messages %}{% for message in messages %}{% if 'city' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="pin">PIN Code <span style="color:red">*</span></label>
      <input type="text" id="pin" name="pin_code" required>
      {% if messages %}{% for message in messages %}{% if 'pin code' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="state">State <span style="color:red">*</span></label>
      <input type="text" id="state" name="state" required>
      {% if messages %}{% for message in messages %}{% if 'state' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="country">Country <span style="color:red">*</span></label>
      <select id="country" name="country" required>
        <option value="">Select Country</option>
        <option>India</option>
        <option>Afghanistan</option>
        <option>USA</option>
        <option>UK</option>
      </select>
      {% if messages %}{% for message in messages %}{% if 'country' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="mobile">Mobile <span style="color:red">*</span></label>
      <input type="tel" id="mobile" name="mobile" required>
      {% if messages %}{% for message in messages %}{% if 'Invalid mobile number' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="landline">Landline</label>
      <input type="tel" id="landline" name="landline">
      {% if messages %}{% for message in messages %}{% if 'landline' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="fax">Fax</label>
      <input type="text" id="fax" name="fax">
      {% if messages %}{% for message in messages %}{% if 'fax' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="email">Primary Email <span style="color:red">*</span></label>
      <input type="email" id="email" name="email" required>
      {% if messages %}{% for message in messages %}{% if 'Email already exists' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="altEmail">Alternate Email</label>
      <input type="email" id="altEmail" name="alt_email">
      {% if messages %}{% for message in messages %}{% if 'alternate email' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="productsOffered">Products Offered <span style="color:red">*</span></label>
      <input type="text" id="productsOffered" name="products_offered" required>
      {% if messages %}{% for message in messages %}{% if 'products offered' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>

    <div class="form-group">
      <label for="productCategory">Product Category <span style="color:red">*</span></label>
      <select id="productCategory" name="product_category" required>
        <option value="">Select Product Category</option>
        <option>Electrical</option>
        <option>Mechanical</option>
        <option>Marine</option>
      </select>
      {% if messages %}{% for message in messages %}{% if 'product category' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
    </div>
  </div>

  <div class="buttons">
    <span></span>
    <button type="button" class="btn" onclick="nextStep()">Next</button>
  </div>
</div>


  <!-- Additional steps (Step 2, 3, and 5) follow similar pattern -->
   <div class="form-step" id="step2">
  <h2>2. Registration & Statutory Documents</h2>

  <div class="form-group">
    <label for="panNo">IT PAN No. <span style="color:red">*</span></label>
    <input type="text" id="panNo" name="pan_no" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Invalid PAN format" in message.message %}
          <span class="error" style="color:red; display:block;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="gstNo">GST Registration No.</label>
    <input type="text" id="gstNo" name="gst_no">
    {% if messages %}
      {% for message in messages %}
        {% if "GST number is not valid" in message.message %}
          <span class="error" style="color:red; display:block;">{{ message }}</span>
        {% endif %}
      {% endfor %}  GST number is not valid
    {% endif %}
  </div>

  <div class="form-group">
    <label for="gstType">GST Registration Type</label>
    <select id="gstType" name="gst_type">
      <option value="">Select GST Regn Type</option>
      <option value="Regular">Regular</option>
      <option value="Composition">Composition</option>
      <option value="Unregistered">Unregistered</option>
    </select>
  </div>

  <div class="form-group">
    <label for="mseCertificate">Upload MSME Certificate</label>
    <input type="file" id="mseCertificate" name="mse_certificate" accept=".pdf,.jpg,.jpeg,.png">
  </div>

  <div class="form-group">
    <label for="mseNo">MSME Registration No. <span style="color:red">*</span></label>
    <input type="text" id="mseNo" name="mse_no" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Invalid MSME Registration Number format." in message.message %}
          <span class="error" style="color:red; display:block;">{{ message }}</span>
        {% endif %}
      {% endfor %}  
    {% endif %}
  </div>

  <div class="form-group">
    <label for="mseValidDate">MSME Validity Date <span style="color:red">*</span></label>
    <input type="date" id="mseValidDate" name="mse_valid_date" required>
    {% if messages %}
      {% for message in messages %}
        {% if "MSME Validity" in message.message %}
          <span class="error" style="color:red; display:block;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="gemNo">GeM Registration No. <span style="color:red">*</span></label>
    <input type="text" id="gemNo" name="gem_no" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Invalid GeM Registration Number format." in message.message %}
          <span class="error" style="color:red; display:block;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="buttons">
    <button type="button" class="btn" onclick="prevStep()">Back</button>
    <button type="button" class="btn" onclick="nextStep()">Next</button>
  </div>
</div>




<div class="form-step" id="step3">
  <h2>3. Financial Information</h2>

  <div class="form-group">
    <label for="bankName">Bank Name <span style="color:red">*</span></label>
    <select id="bankName" name="bank_name" required>
      <option value="">Select Bank Name</option>
      <option value="SBI">State Bank of India</option>
      <option value="HDFC">HDFC Bank</option>
      <option value="ICICI">ICICI Bank</option>
      <option value="PNB">Punjab National Bank</option>
    </select>
    {% if messages %}
      {% for message in messages %}
        {% if "Bank Name" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="bankCode">Bank Code <span style="color:red">*</span></label>
    <input type="text" id="bankCode" name="bank_code" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Bank Code" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="bankCity">Bank City <span style="color:red">*</span></label>
    <input type="text" id="bankCity" name="bank_city" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Bank City" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="branchName">Branch Name <span style="color:red">*</span></label>
    <input type="text" id="branchName" name="branch_name" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Branch Name" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="ifsc">Bank IFSC Code <span style="color:red">*</span></label>
    <input type="text" id="ifsc" name="ifsc" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Invalid IFSC format" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="accountNo">Account Number <span style="color:red">*</span></label>
    <input type="text" id="accountNo" name="account_no" required>
    {% if messages %}
      {% for message in messages %}
        {% if "Invalid account number. It should be 9 to 18 digits." in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="accountType">Account Type <span style="color:red">*</span></label>
    <select id="accountType" name="account_type" required>
      <option value="">Select Account Type</option>
      <option value="Current">Current</option>
      <option value="Savings">Savings</option>
    </select>
    {% if messages %}
      {% for message in messages %}
        {% if "Account Type" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="form-group">
    <label for="paymentType">Payment Type <span style="color:red">*</span></label>
    <select id="paymentType" name="payment_type" required>
      <option value="">Select Payment Type</option>
      <option value="NEFT">NEFT</option>
      <option value="RTGS">RTGS</option>
      <option value="IMPS">IMPS</option>
    </select>
    {% if messages %}
      {% for message in messages %}
        {% if "Payment Type" in message.message %}
          <span class="error" style="color:red;">{{ message }}</span>
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="buttons">
    <button type="button" class="btn" onclick="prevStep()">Back</button>
    <button type="button" class="btn" onclick="nextStep()">Next</button>
  </div>
</div>




  <!-- Final Step: Declaration -->
  <div class="form-step" id="step5">
    <h2>5. Declarations</h2>

    <div class="declaration-box" style="border: 2px solid #0077b6; padding: 20px; border-radius: 10px; background-color: #f1faff; margin-bottom: 20px;">
      <p style="font-size: 16px; margin-bottom: 15px;">
        <strong>Declaration:</strong><br>
        I hereby confirm that all the information provided above is true, complete, and correct to the best of my knowledge and belief.
      </p>
      <div style="display: flex; align-items: center;">
        <input type="checkbox" id="declaration" name="declaration" required style="transform: scale(1.3); margin-right: 10px;">
        <label for="declaration" style="font-size: 15px;">I accept and confirm the above declaration. <span style="color:red">*</span></label>
        {% if messages %}{% for message in messages %}{% if 'declaration' in message.message|lower %}<span class="error" style="color:red">{{ message }}</span>{% endif %}{% endfor %}{% endif %}
      </div>
    </div>

    <div class="form-group">
      <label for="additionalNotes"><strong>Additional Notes (Optional)</strong></label>
      <textarea id="additionalNotes" name="additional_notes" rows="3" placeholder="Any additional comments..." style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;"></textarea>
    </div>

    <div class="buttons" style="display: flex; justify-content: space-between; margin-top: 20px;">
      <button type="button" class="btn" onclick="prevStep()" style="background-color: #0077b6;">‚Üê Previous</button>
      <button type="submit" style="background-color: #0077b6; color: white;">‚úî Submit Registration</button>
    </div>
  </div>
</form>

  </div>
 <script>
  const steps = document.querySelectorAll(".form-step");
  const form = document.getElementById("vendorForm");
  let currentStep = parseInt("{{ current_step|default:0 }}");


  // Show correct step
  function showStep(index) {
    steps.forEach((step, i) => {
      step.classList.toggle("active", i === index);
    });
  }
    showStep(currentStep);

  // Validate each step
  function validateStep(stepIndex) {
    const currentStepForm = steps[stepIndex];
    const requiredFields = currentStepForm.querySelectorAll("[required]");
    let isValid = true;

    requiredFields.forEach(field => {
      if (!field.value.trim()) {
        field.style.borderColor = "red";
        isValid = false;
      } else {
        field.style.borderColor = "";
      }
    });

    if (!isValid) {
      alert("Please fill all required fields before proceeding");
    }

    return isValid;
  }

  function nextStep() {
    if (validateStep(currentStep)) {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }
  }

  function prevStep() {
    if (currentStep > 0) {
      currentStep--;
      showStep(currentStep);
    }
  }

  // Save all form fields to localStorage
  function saveFormToLocalStorage() {
    const formData = new FormData(form);
    const savedData = {};
    formData.forEach((value, key) => {
      savedData[key] = value;
    });
    localStorage.setItem("vendorFormData", JSON.stringify(savedData));
  }

  // Load all form fields from localStorage
  function loadFormFromLocalStorage() {
    const savedData = JSON.parse(localStorage.getItem("vendorFormData"));
    if (savedData) {
      for (let key in savedData) {
        const field = form.elements.namedItem(key);
        if (field) {
          field.value = savedData[key];
        }
      }
    }
  }

  // Clear saved form data
  function clearFormData() {
    localStorage.removeItem("vendorFormData");
  }

  // Save on every change
  form.addEventListener("input", saveFormToLocalStorage);

  // Restore data on page load
  document.addEventListener("DOMContentLoaded", function () {
    loadFormFromLocalStorage();
    showStep(currentStep);
  });

  // On submission, clear saved data if on last step
  form.addEventListener("submit", function (e) {
    if (currentStep !== steps.length - 1) {
      e.preventDefault();
      nextStep();
    } else {
      clearFormData(); // Form successfully submitted, clear saved data
    }
  });
</script>



  
</body>
</html>
